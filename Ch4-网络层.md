# 1.网络层提供的两种服务

1. 在计算机网络领域，网络层应该向运输层提供怎样的服务？

   ==面向连接==还是==无连接==？

   曾引起了长期的争论

2. 争论焦点的实质就是：在计算机通信中，可靠交付应当由谁来负责？

   是==网络==还是==端系统==？



# 2.网际协议IP

1. 网际协议IP是TCP/IP体系中两个最主要的协议之一
2. 与IP协议配套使用的还有三个协议
   + ARP
   + ICMP
   + IGMP

## 2.1虚拟互联网络

1. 将网络互连并且能够互相通信，会遇到许多问题需要解决，如
   + 不同的寻址方案
   + 不同的最大分组长度
   + 不同的网络接入机制
   + 不同的超时控制
   + 不同的差错恢复方法
   + 不同的状态报告方法
   + 不同的路由选择技术
   + 不同的用户接入控制
   + 不同的服务(==面向连接服务和无连接服务==)
   + 不同的管理与控制方式
2. 如何将异构的网络互相连接起来？



### 虚拟互连网络的意义

1. 所谓虚拟互联网络也就是逻辑互连网络

2. 使用ip协议的虚拟互联网络可简称为IP网

3. 使用虚拟互连网络的好处是：

   当互联网上的主机进行通信时，就好像在一个网络上通信一样，而看不见互连的各具体的网络异构细节。

4. ==如果在这种覆盖全球的IP网的上层使用TCP协议，那么就是现在的互联网(Internet)==



### 使用一些中间设备进行互连

1. 将网络互相连接起来要使用一些中间设备
2. 中间设备又称为中继设备





### 网络互连使用路由器

1. 当中继系统时转发器或网桥时，一般并不称之为网络互连，因为这仅仅是把一个网络扩大了，而这仍然是一个网络。
2. 网关由于比较复杂，目前使用得较少
3. ==网络互连都是指用路由器进行网络互连和路由选择==
4. 由于历史原因







## 2.2分类的IP地址



### 2.2.2IP地址的编制方法

1. 分类的IP地址
2. 子网的划分
3. 构成超网



#### 2.2.2.1分类IP地址

1. 将ip地址划分为若干个固定类
2. 每一类地址都由两个固定长度的字段组成，其中一个字段是网络号，一个是主机号



### 2.2.3IP地址的一些重要特点

1. <u>***IP地址是一种分等级的地址结构。分两个等级的好处是***</u>
   + 方便ip地址的管理，因为主机号由该网络号的单位自行分配
   + 路由器进根据网络号来转发
2. ***<u>实际上IP地址是标志一个主机(或路由器)和一条链路的接口</u>***
3. ***<u>用转发器或网桥连接起来的若干个局域网仍为一个网络，因此这些局域网都有同样的网络号</u>***
4. ***<u>所有分配到网络号的网络，无论范围很小的局域网，还是可能覆盖很大地理范围的广域网，都是平等的。</u>***(==交换机工作在数据链路层！不处理ip数据报！==)



## 2.3IP地址与硬件地址

1. IP地址与硬件地址是不同的地址
2. 从层次的角度看



## 2.4地址解析协议ARP

1. 通信时使用了两个地址
   + ip地址(网络层地址)
   + mac地址(数据链路层地址)



### 2.4.1作用

1. 已经知道了一个机器(主机或路由器)的ip地址，如何找出其相应的硬件地址？
2. ARP协议就是干这个的！



## 2.5IP数据报的数据格式

1. 一个IP数据报由==首部==和==数据==两部分组成
2. ***<u>首部的前一部分是固定长度，共20字节，是所有IP数据报必须具有的</u>***
3. 在首部的固定部分的后面是一些可选字段，其长度是可变的。



# 3.划分子网和构造超网

## 3.1划分子网



## 3.2使用子网时分组的转发



## 3.3无分类编址CIDR(构造超网)



# 4.网际控制报文协议ICMP

## 4.1ICMP报文的种类



## 4.2ICMP的应用举例



# 5.互联网的路由选择协议

## 5.1有关路由选择协议的几个基本概念



## 5.2内部网关协议RIP



## 5.3内部网关协议OSPF



## 5.4外部网关协议BGP



## 5.5路由器的构成



# 6.IPv6



# 7.IP多播



# 8.虚拟专用网VPN和网络地址转换NAT



# 9.多协议标记交换MPLS